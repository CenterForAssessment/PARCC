---
title: "Appendix C to the 2017 PARCC Student Growth Model Report:"
subtitle: "Investigation of Potential Ceiling and Floor Effects."
author:
  - name: Adam R. VanIwaarden
  - name: Damian W. Betebenner
  - name: <em>National Center for the Improvement<br></br> of Educational Assessment (NCIEA)</em>
date: February 2018
abstract: "DRAFT REPORT - DO NOT CITE!"
---

<!--SGPreport-->

```{r, echo=FALSE, include=FALSE}
  require(SGP)
  require(Gmisc)
	require(ggplot2)
	require(data.table)

  ## set a universal Cache path
  knitr::opts_chunk$set(cache.path = "_cache/Appendix_C_2017", fig.path="../img/Appendices/Appendix_C_2017/")

  ##  Set Table, Figure and Equation Counters
  options(table_counter=FALSE)
  options(table_number=0)
  options(table_counter_str = "<strong>Table C.%s:</strong> ")
  options("fig_caption_no"=0)
  options(fig_caption_no_sprintf = "**Fig. C.%s:** %s")
	options("equation_counter" = 0)
	
  subject_order<-c("ELA", "MATHEMATICS", 
									 "ALGEBRA_I", "GEOMETRY", "ALGEBRA_II", "INTEGRATED_MATH_1", "INTEGRATED_MATH_2", "INTEGRATED_MATH_3")
	GL_subjects <- c("ELA", "MATHEMATICS")
	EOCT_subjects <-c("ALGEBRA_I", "ALGEBRA_II", "GEOMETRY", "INTEGRATED_MATH_1", "INTEGRATED_MATH_2", "INTEGRATED_MATH_3")

	prior.year <- "2015_2016.2"
	current.year <- "2016_2017.2"

	###  Set up long data
	long.data <- copy(PARCC_SGP@Data[, c("ID", "VALID_CASE", "CONTENT_AREA", "GRADE", "Most_Recent_Prior", "YEAR", "SCALE_SCORE", "SGP_SIMEX_RANKED", "SGP", "SCALE_SCORE_PRIOR", "SCALE_SCORE_PRIOR_STANDARDIZED", "SGP_NORM_GROUP"), with=FALSE][VALID_CASE=="VALID_CASE" & YEAR %in% c(prior.year, current.year)])
	
	long.data <- long.data[VALID_CASE=="VALID_CASE" & !is.na(SGP)]  # !is.na(SGP) since PARCC keeps SGP_NOTE
	
	# setnames(long.data, c("SGP_SIMEX_RANKED", "SGP"), c("SGP", "COHORT_SGP")) # Use Ranked SIMEX SGP for all plots
	setkeyv(long.data, c("CONTENT_AREA", "YEAR", "GRADE", "Most_Recent_Prior", "SCALE_SCORE"))

	loss.hoss <- long.data[YEAR == current.year & !is.na(SGP)][, list(
		LOSS_25 = SCALE_SCORE[which.min(SCALE_SCORE)+24], #  Bottom 25 Scores
		LOSS_1 = min(SCALE_SCORE),   #  LOSS Only
		HOSS_25 = SCALE_SCORE[which.max(SCALE_SCORE)-24], #  TOP 25 Scores
		HOSS_1 = max(SCALE_SCORE)   #  HOSS Only
		), keyby=list(CONTENT_AREA, YEAR, GRADE, Most_Recent_Prior)]

	setkeyv(long.data, c("CONTENT_AREA", "YEAR", "GRADE", "Most_Recent_Prior"))
	long.data <- merge(long.data, loss.hoss, all.x = TRUE)
	long.data[, Grade := ordered(GRADE, levels=c(3:11, "EOCT"))]
	long.data[, CA := ordered(CONTENT_AREA, levels=subject_order, labels=sapply(subject_order, capwords, USE.NAMES = FALSE))]

	##  Subset out all students with max score and their historical long data

	max.data <- data.table(long.data[SCALE_SCORE >= HOSS_25 & !is.na(SGP),], key=c("ID", "CONTENT_AREA", "GRADE"))
	max.data[, CA := ordered(CONTENT_AREA, levels=c(GL_subjects, rev(EOCT_subjects)), labels=sapply(c(GL_subjects, rev(EOCT_subjects)), capwords, USE.NAMES = FALSE))] # rev EOCT to order top to bottom of boxplot
	min.data <- data.table(long.data[SCALE_SCORE <= LOSS_25 & !is.na(SGP),], key=c("ID", "CONTENT_AREA", "GRADE"))
	min.data[, CA := ordered(CONTENT_AREA, levels=c(GL_subjects, rev(EOCT_subjects)), labels=sapply(c(GL_subjects, rev(EOCT_subjects)), capwords, USE.NAMES = FALSE))]

	###
	###  Utility functions for ggplot (necessary because use of ggplot(...) withing knitr is odd - can't find defined variables in envir/scope, just like data.table)
	###

	condDistPlot <- function(ca, g, prior.ca = NULL) {
		if (g == "EOCT") {
			tmp.data <- subset(long.data, YEAR==current.year & CONTENT_AREA==ca & Most_Recent_Prior==prior.ca & !is.na(SCALE_SCORE_PRIOR), select=c(ID, SCALE_SCORE, SCALE_SCORE_PRIOR, LOSS_25, HOSS_25, SGP, SGP_NORM_GROUP))
			y.lab <- paste(current.year, gsub("Sec ", "Secondary ", capwords(ca)))
			x.lab <- paste(c(sapply(strsplit(prior.ca, "/")[[1]], capwords)), collapse = " ") #"First Prior:", 
			x.lab <- gsub(" Eoct", "", x.lab)
			x.lab <- gsub(" EOCT", "", x.lab)
			x.lab <- gsub(" 8", " Grade 8", x.lab)
			x.lab <- gsub(" 7", " Grade 7", x.lab)
			x.lab <- gsub(" 6", " Grade 6", x.lab)
		}	else {
			tmp.data <- subset(long.data, YEAR==current.year & CONTENT_AREA==ca & GRADE==g & !is.na(SCALE_SCORE_PRIOR), select=c(ID, SCALE_SCORE, SCALE_SCORE_PRIOR, LOSS_25, HOSS_25, SGP, SGP_NORM_GROUP))
			y.lab <- paste(current.year, "Grade", g, capwords(ca))
			if (is.null(prior.ca)) prior.ca <- ca
			x.lab <- paste(prior.year, "Grade", g-1, capwords(prior.ca))
		}

		tmp.pnts <- unique(tmp.data, by=c("SCALE_SCORE", "SCALE_SCORE_PRIOR", "SGP"))
		# if (length(unique(tmp.pnts$SGP_NORM_GROUP)) > 1) {tmp.h <- 25; tmp.w <- 25} else {tmp.h <- 0; tmp.w <- 0}
		tmp.knots<- quantile(tmp.data$SCALE_SCORE_PRIOR, probs = c(0.2, 0.4, 0.6, 0.8))
		tmp.bnds <- extendrange(tmp.data$SCALE_SCORE_PRIOR, f=0.1)
		tmp.x.scale <- extendrange(tmp.data$SCALE_SCORE_PRIOR, f=0.05)
		tmp.y.scale <- extendrange(tmp.data$SCALE_SCORE, f=0.05) # 0.1 if using 1st and 99th percentiles in geom_quantile
		
		ggplot(NULL, aes(x=SCALE_SCORE_PRIOR, y=SCALE_SCORE, label=SGP)) + # NULL data to use different data sets below ## , fill=SGP_NORM_GROUP
			# geom_text(data=tmp.pnts, aes(colour=SGP_NORM_GROUP), size=2.5, position=position_jitter(width = 10, height = 10)) + scale_colour_grey() + theme_bw() + #
			theme_bw() + xlim(tmp.x.scale) + ylim(tmp.y.scale) +
			geom_text(data=tmp.pnts, size=2.75, alpha=0.65) + #, position=position_jitter(tmp.w, tmp.h)
			# geom_smooth(data=tmp.data, aes(x=SCALE_SCORE_PRIOR), colour="magenta", method="gam", formula = y ~ s(x, bs = "cs")) + 
			geom_quantile(data=tmp.data, aes(x=SCALE_SCORE_PRIOR, y=SCALE_SCORE), quantiles = c(0.05, 0.5, 0.95), colour="magenta", formula = y ~ splines::bs(x, knots=tmp.knots, Boundary.knots = tmp.bnds)) +
			# geom_quantile(data=tmp.data, aes(x=SCALE_SCORE_PRIOR, y=SCALE_SCORE), quantiles = c(0.01, 0.5, 0.99), colour="red", method = "rqss") + 
			# geom_quantile(data=tmp.data, aes(x=SCALE_SCORE_PRIOR, y=SCALE_SCORE), quantiles = c(0.01, 0.5, 0.99), colour="red", method = "rqss", lambda = 1.5) + 
			geom_rug(data=tmp.data, sides="tb", size=0.05, col=rgb(0,0,0.8, alpha=0.1)) + 
			geom_rug(data=tmp.data, sides="rl", size=0.05, col=rgb(0.8,0,0, alpha=0.1)) +
			stat_density2d(data=tmp.data, geom="density2d",  aes(alpha = ..level..), colour="green", contour = TRUE) + #, size=1
			geom_hline(data=tmp.pnts, aes(yintercept=LOSS_25), colour="red", linetype="dotted") +
			geom_hline(data=tmp.pnts, aes(yintercept=HOSS_25), colour="red", linetype="dotted") +
			annotate("text", label = paste0("N = ", prettyNum(nrow(tmp.data), preserve.width = "individual", big.mark=",")), 
							 x = tmp.x.scale[2]*0.9, y = tmp.y.scale[1]*1.1, size = 3.5, colour = "red") +
			labs(y = y.lab, x = x.lab) + theme(axis.title=element_text(size=10, face="bold"), legend.position="none")
	}

	boxPlot <- function(tmp.data, y, LOSS=FALSE, facet=NULL) {
		give.n <- function(x) { return(c(y = y, label = length(x))) }
		if (is.null(facet)) {
			if (LOSS) {
				p <- ggplot(data=tmp.data, aes(x=CA, y=SGP, col=CA, ymax=(min(SGP) +7))) + 
						 geom_boxplot() + labs(x="Content Area", y="Lowest Scoring Students' Growth Percentiles")
			} else {
				p <- ggplot(data=tmp.data, aes(x=CA, y=SGP, col=CA, ymax=(min(SGP) -7))) + 
						 geom_boxplot() + labs(x="Content Area", y="Highest Scoring Students' Growth Percentiles")
			}
			p + stat_summary(fun.data = give.n, geom = "text", position=position_dodge(width = 0.75), size=3, colour="red") + coord_flip() +
					theme(axis.title=element_text(size=12, face="bold"), strip.text = element_text(size=10,face="bold"), legend.position="none")
		} else {
		if (facet=="Grade") {
			if (LOSS) {
				p <- ggplot(data=tmp.data, aes(x=Grade, y=SGP, col=Grade, ymax=(min(SGP) +7))) + 
						 geom_boxplot() + facet_grid(.~CA, scales="free") + labs(x="", y="Lowest Scoring Students' Growth Percentiles") 
			} else {
				p <- ggplot(data=tmp.data, aes(x=Grade, y=SGP, col=Grade, ymax=(min(SGP) -7))) + 
						 geom_boxplot() + facet_grid(.~CA, scales="free") + labs(x="", y="Highest Scoring Students' Growth Percentiles") 
			}
			p + stat_summary(fun.data = give.n, geom = "text", position=position_dodge(0.75), size=3, colour="red") +
					coord_flip() + guides(col = guide_legend(reverse = TRUE)) +
					theme(axis.title=element_text(size=12,face="bold"), axis.text.y = element_blank(), strip.text = element_text(size=10, face="bold"))
					
		} else {
			###  Facet is Most_Recent_Prior
			tmp.data[, Most_Recent_Prior := gsub("/", " ", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("2014_2015.2", "Spring 2015", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("2015_2016.2", "Spring 2016", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("2016_2017.1", "Fall 2016", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("_EOCT", "", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("_8", " Grade 8", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("_7", " Grade 7", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := gsub("_6", " Grade 6", Most_Recent_Prior)]
			tmp.data[, Most_Recent_Prior := sapply(Most_Recent_Prior, capwords)]
			tmp.data[, Most_Recent_Prior := gsub("Mathematics", "Math", Most_Recent_Prior)]
			setnames(tmp.data, "Most_Recent_Prior", "Most Recent Prior")
			
			if (LOSS) {
				p <- ggplot(data=tmp.data, aes(x=`Most Recent Prior`, y=SGP, col=`Most Recent Prior`, ymax=(min(SGP) +7))) + 
						 geom_boxplot() + facet_grid(.~CA, scales="free") + labs(x="", y="Lowest Scoring Students' Growth Percentiles") 
			} else {
				p <- ggplot(data=tmp.data, aes(x=`Most Recent Prior`, y=SGP, col=`Most Recent Prior`, ymax=(min(SGP) -7))) + 
						 geom_boxplot() + facet_grid(.~CA, scales="free") + labs(x="", y="Highest Scoring Students' Growth Percentiles") 
			}
			p + stat_summary(fun.data = give.n, geom = "text", position=position_dodge(0.75), size=3, colour="red") +
					coord_flip() +  guides(col = guide_legend(reverse = TRUE)) +
					theme(axis.title=element_text(size=12,face="bold"), axis.text.y = element_blank(), strip.text = element_text(size=10, face="bold"))
		}}
	}
```


# Introduction
Ceiling and floor effects are a common characteristic of many standardized assessments (i.e. a relatively large proportion of students scoring at/near the scale score extremes).  These assessment ceilings/floors can also telegraph onto the Student Growth Percentile (SGP) calculations causing confusing or concerning results.

With perfect data and model fit, the expectation is that the majority of SGPs for students scoring at or near the lowest obtainable scale score (LOSS) will be low (preferably less than 5 and not higher than 20), and that SGPs for students with the highest obtainable scale score (HOSS) will be high (higher than 95 and not less than 80).  Ceiling effects in growth measures are somewhat more problematic than floor effects because students that consistently receive the highest scores are given lower than expected growth percentiles and are therefore negatively impacted.  Conversely, the consistently lowest achieving students have higher estimated SGPs than expected.  This could possibly conceal unacceptably low growth that might otherwise be identified and addressed.

In general these problems are caused by the way in which a "percentile" is most typically defined to begin with, and the inability of the assessments (and therefore the SGP model) to make granular distinctions between kids who score at the extremes of the test year after year.  As an example, if a group of students were given a relatively easy test and 20% of them received a perfect score, these students would be defined as being in the 80<sup>th</sup> percentile of achievement because they scored higher than 80% of their peers.  This is somewhat misleading however, because their score was *equal to* or greater than *all* of their peers and so could be also described as achieving at the 99<sup>th</sup> percentile under an equally valid definition.

To extend this heuristic from achievement to growth, if 50% of those top students also scored perfectly on the next test, we might estimate that they had 50<sup>th</sup> percentile growth.  Although there is nothing *technically* incorrect about this estimate since their growth is fairly typical for their academic peer group, it is an inadequate or unsatisfactory assessment of their growth because they have consistently attained the highest levels.  Furthermore, if it is typical for their peers to maintain perfect scores then even small deviations from a perfect score could produce *low growth* SGP estimates.

Typically only a few students are impacted by ceiling and floor effects, making them difficult to detect using traditional SGP diagnostic tools.  The Center for Assessment has now added "Ceiling/Test Effects" indicators to the SGP model goodness of fit plots and is providing all clients even more rigorous diagnostic and descriptive analyses through this Appendix to the annual technical report.  This report includes:

1. Scatter plots of the current and the most recent prior year's test score distributions to indicate ceilings or floors in the data used in growth calculations.
2. Box plots showing the range and distribution of SGPs for *only* the highest and lowest achieving students in the current year.


```{r, cache=FALSE, results="asis", echo=FALSE}
	Literasee:::pageBreak()
```


# Prior and Current Year Score Distributions
The marginal and conditional distributions of test scores can serve as a preliminary indicator of potential ceiling or floor effects in the calculation of student growth percentiles.  Some minor problems could present themselves if these characteristics are present in either prior or current year scores, and are particularly likely when present in both.  

The plots below depict distributions for the current year and the most recent prior year used in the SGP calculations for each content area and grade level.  These plots start with a basic scatter plot of each student's scores to show their conditional (joint) score distributions, and each point is depicted as the estimated SGP value based on their scores^[Note that many SGPs are estimated using more than one prior score, and therefore plots may show SGP results from multiple analyses and/or varying SGPs for identical score combinations.].  On top of this is layered 1) **green contour lines** to provide a sense of the joint density, 2) three **non-linear magenta lines** identifying the bivariate relationship between prior and current scores at the 5<sup>th</sup>, 50<sup>th</sup> and 95<sup>th</sup> percentiles^[Produced using quantile regression similar to, but not the same as, that used in calculation of the SGPs.], 3) **red** dotted lines that represent the cutoff for the highest and lowest 25+ current scale scores (corresponding with the first and last rows of the fit plot table), and 4) **rug plots** that depict the marginal distributions (prior scores shown in blue and current scores in red).  

Ceiling or floor effects may be indicated by dark shaded SGP values in the extreme top-right or bottom-left corners of the plots.  This suggests that staying at the extremes is common, which may lead to odd growth estimates for these high/low achieving students.  We see very few issues in all content areas and grades in the 2016 and 2017 PARCC grade level data.  Where minor ceilings appear in either years' data, the opposite year score distributions for these students are well distributed, lessening the concern for a growth ceiling effect.

```{r, echo=FALSE, include=FALSE, cache=TRUE, condDist_EOG, fig.height=2.5, fig.width=3}
	condDistPlot(ca="ELA", g=4)
	condDistPlot(ca="ELA", g=5)
	condDistPlot(ca="ELA", g=6)
	condDistPlot(ca="ELA", g=7)
	condDistPlot(ca="ELA", g=8)
	condDistPlot(ca="ELA", g=9)
	condDistPlot(ca="ELA", g=10)
	condDistPlot(ca="ELA", g=11)

	condDistPlot(ca="MATHEMATICS", g=4)
	condDistPlot(ca="MATHEMATICS", g=5)
	condDistPlot(ca="MATHEMATICS", g=6)
	condDistPlot(ca="MATHEMATICS", g=7)
	condDistPlot(ca="MATHEMATICS", g=8)

	# summary(max.data[CONTENT_AREA %in% "MATHEMATICS" & GRADE == "6" & SCALE_SCORE==HOSS_1 & SCALE_SCORE_PRIOR > 700]$SGP)
```

`r Literasee:::pageBreak()`


##  End-of-Grade Content Areas

```{r, results="asis", echo=FALSE, ELA_Cond_Dists1}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOG-1.png", "../img/Appendices/Appendix_C_2017/condDist_EOG-2.png"),
			rows = 1, columns = 2, page.break= TRUE, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: ELA.")
```


```{r, results="asis", echo=FALSE, ELA_Cond_Dists2}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOG-3.png", "../img/Appendices/Appendix_C_2017/condDist_EOG-4.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOG-5.png", "../img/Appendices/Appendix_C_2017/condDist_EOG-6.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOG-7.png", "../img/Appendices/Appendix_C_2017/condDist_EOG-8.png"),
			rows = 2, columns = 2, page.break= TRUE, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: ELA <em>Continued</em>.")
```


```{r, results="asis", echo=FALSE, Math_Cond_Dists}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOG-9.png",  "../img/Appendices/Appendix_C_2017/condDist_EOG-10.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOG-11.png", "../img/Appendices/Appendix_C_2017/condDist_EOG-12.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOG-13.png"),
			rows = 3, columns = 2, page.break= TRUE, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: Mathematics.")
```
	

##  End-of-Course Test Subjects

The conditional density plots for the EOC test subjects are displayed below.  The most recent prior is used in each plot to provide insight on the academic peer group based analyses.  Some of these norm groups represent atypical student populations (e.g. high achieving middle school students who take math EOCT assessments), which can also cause ceiling effects for different reasons.

Overall there is no evidence for concern of ceiling or floor effects in the PARCC EOCT analyses.  There is one individual case that appears to be problematic in Geometry cohort that had Algebra II as the most recent prior.  Here we see a student who consistently scored extremely high at least two years in a row and yet her estimated SGP is 1^[Interestingly, the Ranked SIMEX SGP estimate for this same student is 69, which shows how the SIMEX correction can help in these cases].  This is likely not an adequate description of this student's growth, and an individual (manual) correction may be required for this specific case.


```{r, echo=FALSE, include=FALSE, cache=TRUE, condDist_EOC, fig.height=2.5, fig.width=3}
# table(long.data[YEAR==current.year & CONTENT_AREA=="ALGEBRA_I" & !is.na(SGP), Most_Recent_Prior])

	condDistPlot(ca="ALGEBRA_I", g="EOCT", prior.ca="2015_2016.2/MATHEMATICS_6")
	condDistPlot(ca="ALGEBRA_I", g="EOCT", prior.ca="2015_2016.2/MATHEMATICS_7")
	condDistPlot(ca="ALGEBRA_I", g="EOCT", prior.ca="2015_2016.2/MATHEMATICS_8")
	condDistPlot(ca="ALGEBRA_I", g="EOCT", prior.ca="2015_2016.2/GEOMETRY_EOCT")
	# max.data[CONTENT_AREA %in% "GEOMETRY" & SCALE_SCORE==HOSS_1 & Most_Recent_Prior=="2015_2016.2/ALGEBRA_II_EOCT"]

	condDistPlot(ca="GEOMETRY", g="EOCT", prior.ca="2015_2016.2/MATHEMATICS_8")
	condDistPlot(ca="GEOMETRY", g="EOCT", prior.ca="2015_2016.2/ALGEBRA_I_EOCT")
	condDistPlot(ca="GEOMETRY", g="EOCT", prior.ca="2015_2016.2/ALGEBRA_II_EOCT")

	condDistPlot(ca="ALGEBRA_II", g="EOCT", prior.ca="2015_2016.2/ALGEBRA_I_EOCT")
	condDistPlot(ca="ALGEBRA_II", g="EOCT", prior.ca="2015_2016.2/GEOMETRY_EOCT")
	condDistPlot(ca="ALGEBRA_II", g="EOCT", prior.ca="2016_2017.1/GEOMETRY_EOCT")

	condDistPlot(ca="INTEGRATED_MATH_1", g="EOCT", prior.ca="2015_2016.2/MATHEMATICS_7")
	condDistPlot(ca="INTEGRATED_MATH_1", g="EOCT", prior.ca="2015_2016.2/MATHEMATICS_8")

	condDistPlot(ca="INTEGRATED_MATH_2", g="EOCT", prior.ca="2015_2016.2/INTEGRATED_MATH_1_EOCT")

```

```{r, results="asis", echo=FALSE, Alg1_Cond_Dists}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOC-1.png", "../img/Appendices/Appendix_C_2017/condDist_EOC-2.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOC-3.png", "../img/Appendices/Appendix_C_2017/condDist_EOC-4.png"),
			rows = 2, columns = 2, page.break= TRUE, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: Algebra I.")
```


```{r, results="asis", echo=FALSE, Geom_Cond_Dists}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOC-5.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOC-6.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOC-7.png"),
			rows = 3, columns = 2, page.break= TRUE, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: Geometry.")
```


```{r, results="asis", echo=FALSE, Alg2_Cond_Dists}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOC-8.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOC-9.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOC-10.png"),
			rows = 3, columns = 2, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: Algebra II.")
```


```{r, results="asis", echo=FALSE, IntMath1_Cond_Dists}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOC-11.png",
								"../img/Appendices/Appendix_C_2017/condDist_EOC-12.png"),
			rows = 2, columns = 2, page.break= FALSE, pdf.width = 0.5,
			caption = "Conditional distribution(s) of current and prior scale scores: Integrated Math 1.")
```


```{r, results="asis", echo=FALSE, IntMath2_Cond_Dists}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/condDist_EOC-13.png"),
			rows = 2, columns = 2, pdf.width = 0.475, page.break=TRUE,
			caption = "Conditional distribution(s) of current and prior scale scores: Integrated Math 2.")
```


# SGP Ranges for the Highest and Lowest Achieving Students

In order to isolate the impact of assessment ceilings/floors on student growth percentile (SGP) calculations, the following section provides box plots of the distribution of SGPs for the highest and lowest achieving students.  We are specifically interested in the growth percentiles for students scoring at the highest/lowest obtainable scale score (HOSS/LOSS - i.e. the test ceiling/floor) on the current year test.  However, in order to assure that an adequate number of students are included, the first set of plots uses, at a *minimum*, the highest/lowest 25 scores.  These plots are provided as a starting point since this roughly corresponds to the number of students in the top and bottom rows of the table included in the SGP model goodness of fit plots.  All students with a score in these students' range of scores are included.  Consequently, the number of students in each box plot may be greater than 25 (the exact number is shown at the margins in red text).

The second set of box plots isolate ***only*** those students scoring the HOSS/LOSS.  These plots may then incorporate a varying number of students depending on the prevalence of a ceiling/floor in the current year.

The box plots provide several descriptive statistics.  The dark line within the box marks the *median* SGP, while the ends ("hinges") of the boxes correspond to the first and third quartiles (the 25<sup>th</sup> and 75<sup>th</sup> percentiles).  The upper whisker extends from the hinge to the highest value that is within 1.5 $\times$ IQR of the hinge, where IQR is the inter-quartile range, or distance between the first and third quartiles. The lower whisker extends from the hinge to the lowest value within 1.5 $\times$ IQR of the hinge. Data beyond the end of the whiskers are outliers and plotted as individual points.  Evidence of a *lack* of either a ceiling or floor effect would be to have all high achieving students with SGPs near 99 and all low achieving students with SGPs near 1.  That is, the desired visual evidence is a solid line at SGP = 99/1.


```{r, echo=FALSE, include=FALSE, cache=TRUE, HOSS_Box_EOG, fig.height=4, fig.width=7}
	min.ceiling<-min(max.data[CONTENT_AREA %in% GL_subjects]$SGP)-5
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% GL_subjects], min.ceiling, facet="Grade")
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% GL_subjects & SCALE_SCORE==HOSS_1], min.ceiling+5, facet="Grade")
```

```{r, echo=FALSE, include=FALSE, cache=TRUE, LOSS_Box_EOG, fig.height=4, fig.width=7}
	max.floor <- max(min.data[CONTENT_AREA %in% GL_subjects]$SGP)
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% GL_subjects], max.floor+5, LOSS=TRUE, facet="Grade")
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% GL_subjects & SCALE_SCORE==LOSS_1], max.floor+5, LOSS=TRUE, facet="Grade")
```

## Grade Level Content Areas

The scatter plots in the previous section showed that there are no concerns for ceiling or floor effects in either the ELA or Mathematics assessments.  Figure C. 9 suggests that there are potential problems in the high school ELA tests and 8<sup>th</sup> grade Mathematics.  However, Figure C. 10 shows that potential ceiling issues do not effect the students that scored exactly the HOSS.  Only students scoring just below the HOSS have somewhat lower SGPs, but these growth estimates are still relatively high.


```{r, results="asis", echo=FALSE, EOG_HOSS1}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOG-1.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOG-1.png"),
			rows = 2, columns = 1, page.break= TRUE,
			caption = "Grade Level SGP distributions for highest and lowest 25+ scale scores by content area and grade level.")
```


```{r, results="asis", echo=FALSE, EOG_HOSS2}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOG-2.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOG-2.png"),
			rows = 2, columns = 1, page.break= TRUE,
			caption = "Grade Level SGP distributions for the HOSS and LOSS scores by content area and grade level.")
```


## EOCT Subjects

The end-of-course subject results are shown here *only for students scoring exactly the HOSS and LOSS* respectively.  There are several subjects for which potential ceiling effects are evident.  All EOCT subjects are disaggregated further by the most recent prior test included in each analyses in order to adequately address any concerns.

```{r, echo=FALSE, include=FALSE, cache=TRUE, HOSS_Box_EOC, fig.height=4, fig.width=7}
	min.ceiling<-min(max.data[CONTENT_AREA %in% EOCT_subjects]$SGP)

	boxPlot(tmp.data=max.data[CONTENT_AREA %in% EOCT_subjects & SCALE_SCORE==HOSS_1], min.ceiling)

	boxPlot(tmp.data=max.data[CONTENT_AREA %in% "ALGEBRA_I" & SCALE_SCORE==HOSS_1], min.ceiling, facet="Most_Recent_Prior")
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% "GEOMETRY" & SCALE_SCORE==HOSS_1], min.ceiling, facet="Most_Recent_Prior")
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% "ALGEBRA_II" & SCALE_SCORE==HOSS_1], min.ceiling, facet="Most_Recent_Prior")
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% "INTEGRATED_MATH_1" & SCALE_SCORE==HOSS_1], min.ceiling, facet="Most_Recent_Prior")
	boxPlot(tmp.data=max.data[CONTENT_AREA %in% "INTEGRATED_MATH_2" & SCALE_SCORE==HOSS_1], min.ceiling, facet="Most_Recent_Prior")
```

```{r, echo=FALSE, include=FALSE, cache=TRUE, LOSS_Box_EOC, fig.height=4, fig.width=7}
	max.floor <- max(min.data[CONTENT_AREA %in% EOCT_subjects]$SGP)

	boxPlot(tmp.data=min.data[CONTENT_AREA %in% EOCT_subjects & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE)
	
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% "ALGEBRA_I" & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE, facet="Most_Recent_Prior")
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% "GEOMETRY" & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE, facet="Most_Recent_Prior")
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% "ALGEBRA_II" & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE, facet="Most_Recent_Prior")
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% "INTEGRATED_MATH_1" & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE, facet="Most_Recent_Prior")
	boxPlot(tmp.data=min.data[CONTENT_AREA %in% "INTEGRATED_MATH_1" & SCALE_SCORE==LOSS_1], max.floor, LOSS=TRUE, facet="Most_Recent_Prior")
```

```{r, results="asis", echo=FALSE, EOC_HOSS}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOC-1.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOC-1.png"),
			rows = 2, columns = 1, page.break= TRUE, pdf.width = 0.95,
			caption = "EOCT SGP distributions for the HOSS and LOSS scores by content area.")
```


The EOCT subject box plots can be disaggregated further by the most recent prior to reflect their constituent norm groups more closely.  The following box plots disaggregate each EOCT subject by norm groups.


```{r, results="asis", echo=FALSE, Alg1_HOSS}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOC-2.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOC-2.png"),
			rows = 2, columns = 1, page.break= TRUE, pdf.width = 0.93,
			caption = "EOCT SGP distributions for the HOSS and LOSS scores by norm group: Algebra I.")
```


The plots for the Geometry progression with the Algebra II prior is notable.  This progression can also be seen in Figure C.5 above.  Here the student who scored near the HOSS consecutively has an unexpectedly low SGP of 1.


```{r, results="asis", echo=FALSE, Geom_HOSS}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOC-3.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOC-3.png"),
			rows = 2, columns = 1, page.break= TRUE,
			caption = "EOCT SGP distributions for the HOSS and LOSS scores by norm group: Geometry.")
```

```{r, results="asis", echo=FALSE, Alg2_HOSS}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOC-4.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOC-4.png"),
			rows = 2, columns = 1, page.break= TRUE,
			caption = "EOCT SGP distributions for the HOSS and LOSS scores by norm group: Algebra II.")
```

```{r, results="asis", echo=FALSE, IntMath1_HOSS}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOC-5.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOC-5.png"),
			rows = 2, columns = 1, page.break= TRUE, pdf.width = 0.95,
			caption = "EOCT SGP distributions for the HOSS and LOSS scores by norm group: Integrated Math 1.")
```

```{r, results="asis", echo=FALSE, IntMath2_HOSS}
		placeFigure(
			files = c("../img/Appendices/Appendix_C_2017/HOSS_Box_EOC-6.png", "../img/Appendices/Appendix_C_2017/LOSS_Box_EOC-6.png"),
			rows = 2, columns = 1, page.break= TRUE, pdf.width = 0.93,
			caption = "EOCT SGP distributions for the HOSS and LOSS scores by norm group: Integrated Math 2.")
```


#  Discussion

Overall there is little evidence of floor or ceiling effects in the Spring 2017 PARCC SGP analyses.  Some scores for EOC test progressions with small cohorts suggest that a few minor problems may exist that could require changes.  When ceiling or floor effects are encountered, there are several ways in which they can be "corrected" manually or analytically.  These include (but not limited to):

1. Convert all students scoring at the HOSS (LOSS) to 99 (1.
2. Run SGP analyses with more granular scores.  For example, many tests that use Item Response Theory (IRT) to analyse test results provide scaled scores that enforce an artificial ceiling (floor), but also have more granular achievement scores available (IRT $\theta$ estimates).
3. Leave the results without a correction.

